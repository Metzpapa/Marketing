<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RapidEye - STR Property Management</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;1,400&display=swap" rel="stylesheet">
  <script type="importmap">
    {
      "imports": {
        "three": "https://unpkg.com/three@0.160.0/build/three.module.js",
        "three/addons/": "https://unpkg.com/three@0.160.0/examples/jsm/"
      }
    }
  </script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background-color: #faf9f7;
      height: 100vh;
      overflow: hidden; /* Prevent body scroll to keep "one screen" feel */
    }
    #root {
      height: 100%;
    }
    /* Custom Scrollbar for the source panel */
    .source-scroll::-webkit-scrollbar {
      width: 6px;
    }
    .source-scroll::-webkit-scrollbar-track {
      background: #f1f1f1;
    }
    .source-scroll::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 3px;
    }
    .source-scroll::-webkit-scrollbar-thumb:hover {
      background: #999;
    }
  </style>
</head>
<body>
  <div id="root"></div>

  <script type="text/babel" data-type="module">
    import * as THREE from 'three';
    const { useState, useEffect, useRef } = React;

    // --- 3D Logo Component ---
    const RapidEyeLogo = () => {
      const mountRef = useRef(null);

      useEffect(() => {
        if (!mountRef.current) return;

        const width = 200;
        const height = 200;

        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(45, width / height, 0.1, 1000);
        
        camera.position.z = 24; 
        camera.position.x = 0;
        camera.position.y = 0;

        const renderer = new THREE.WebGLRenderer({
          antialias: true,
          alpha: true
        });
        renderer.setSize(width, height);
        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));
        
        mountRef.current.appendChild(renderer.domElement);

        const vertices = [];

        function randomPointOnSphere(radius) {
          const u = Math.random();
          const v = Math.random();
          const theta = 2 * Math.PI * u;
          const phi = Math.acos(2 * v - 1);
          const x = radius * Math.sin(phi) * Math.cos(theta);
          const y = radius * Math.sin(phi) * Math.sin(theta);
          const z = radius * Math.cos(phi);
          return { x, y, z };
        }

        // Cloud layer
        const cloudCount = 60000;
        const maxCloudRadius = 10.0;
        const minCloudRadius = 4.0;

        for (let i = 0; i < cloudCount; i++) {
          const u = Math.random();
          const v = Math.random();
          const theta = 2 * Math.PI * u;
          const phi = Math.acos(2 * v - 1);
          const distanceNormal = Math.random();
          const r = minCloudRadius + (maxCloudRadius - minCloudRadius) * Math.pow(distanceNormal, 1.8);
          const x = r * Math.sin(phi) * Math.cos(theta);
          const y = r * Math.sin(phi) * Math.sin(theta);
          const z = r * Math.cos(phi);
          vertices.push(x, y, z);
        }

        // Eyeball layer
        const eyeballCount = 12000;
        const eyeRadius = 4.0;
        for (let i = 0; i < eyeballCount; i++) {
          let p = randomPointOnSphere(eyeRadius);
          const cutoffNoise = (Math.random() * 0.2) - 0.1;
          if (p.z > 3.2 + cutoffNoise) continue;
          vertices.push(p.x, p.y, p.z);
        }

        // Iris layer
        const irisCount = 8000;
        const irisRadius = 2.3;
        const pupilRadius = 0.8;
        for (let i = 0; i < irisCount; i++) {
          const r = Math.sqrt(Math.random()) * irisRadius;
          const theta = Math.random() * 2 * Math.PI;
          if (r < pupilRadius) continue;
          const x = r * Math.cos(theta);
          const y = r * Math.sin(theta);
          const z = 3.5 - (r * 0.2);
          vertices.push(x, y, z);
        }

        const geometry = new THREE.BufferGeometry();
        geometry.setAttribute('position', new THREE.Float32BufferAttribute(vertices, 3));

        const material = new THREE.PointsMaterial({
          color: 0x18181B,
          size: 0.05,
          sizeAttenuation: true,
          transparent: true,
          opacity: 0.25,
          depthWrite: false
        });

        const pointCloud = new THREE.Points(geometry, material);
        scene.add(pointCloud);

        const baseAngle = 57 * (Math.PI / 180);

        let animationId;
        let time = 0;
        
        const animate = () => {
          animationId = requestAnimationFrame(animate);
          time += 0.002;
          pointCloud.rotation.y = baseAngle + Math.sin(time) * 0.15;
          renderer.render(scene, camera);
        };
        
        animate();

        return () => {
          cancelAnimationFrame(animationId);
          if (mountRef.current) {
            mountRef.current.removeChild(renderer.domElement);
          }
          geometry.dispose();
          material.dispose();
          renderer.dispose();
        };
      }, []);

      const maskStyle = {
        WebkitMaskImage: 'radial-gradient(circle, rgba(0,0,0,1) 30%, rgba(0,0,0,0) 70%)',
        maskImage: 'radial-gradient(circle, rgba(0,0,0,1) 30%, rgba(0,0,0,0) 70%)'
      };

      return (
        <div 
          ref={mountRef} 
          style={{ 
            width: '200px', 
            height: '200px', 
            position: 'absolute',
            left: '-70px',
            top: '-55px',
            pointerEvents: 'none',
            zIndex: 0,
            ...maskStyle
          }} 
        />
      );
    };

    // --- Main Application ---
    const PMGrowthTimeline = () => {
      const [activeCompany, setActiveCompany] = useState(null);
      const sourcesContainerRef = useRef(null);

      // Text positions for featured callouts
      const calloutPositions = {
        'Vacasa': { x: -126, y: -170 },
        'Evolve': { x: -368, y: -205 },
        'AvantStay': { x: 174, y: -102 },
        'TurnKey': { x: -393, y: -116 },
        'Grand Welcome': { x: 79, y: -58 },
        'Blueground': { x: -60, y: -160 },
        'Sonder': { x: -130, y: -198 },
        'Casago': { x: -175, y: -86 },
      };

      // Line endpoint positions for featured callouts
      const lineEndpoints = {
        'Vacasa': { x: -22, y: -158 },
        'Evolve': { x: -286, y: -195 },
        'AvantStay': { x: 184, y: -84 },
        'TurnKey': { x: -303, y: -106 },
        'Grand Welcome': { x: 147, y: -47 },
        'Blueground': { x: -21, y: -138 },
        'Sonder': { x: -42, y: -180 },
        'Casago': { x: -81, y: -71 },
      };

      const companies = [
        {
          name: 'Casago',
          color: '#2d8659',
          status: 'active',
          funding: '$130M',
          model: 'Franchise',
          note: 'Founded 2001',
          dataPoints: [
            { year: 2019, properties: 1000, label: 'Launched franchise model (founded 2001)', source: 'Rental Scale-Up', url: 'https://www.rentalscaleup.com/vacation-rental-franchise-brand-casago-doubles-footprint/' },
            { year: 2023, properties: 7000, label: '7,000+ properties, 51 destinations', source: 'Rental Scale-Up', url: 'https://www.rentalscaleup.com/vacation-rental-franchise-brand-casago-doubles-footprint/' },
            { year: 2025, properties: 45000, label: '45,000 (Vacasa acquisition)', source: 'Phocuswire', url: 'https://www.phocuswire.com/str-management-casago-acquires-vacasa', featured: true, callout: 'Acquires Vacasa for $130M → #1 in NA' },
          ]
        },
        {
          name: 'Vacasa',
          color: '#1a1a1a',
          status: 'acquired',
          funding: '$970M',
          model: 'Full-service',
          dataPoints: [
            { year: 2009, properties: 5, label: 'Founded with 5 properties', source: 'Vacasa', url: 'https://www.vacasa.com/news/vacasa-celebrates-10th-anniversary' },
            { year: 2014, properties: 1200, label: '1,200 properties', source: 'VRM Intel', url: 'https://vrmintel.com/vacasa-founders-eric-breon-cliff-johnson-inside-look-vacasas-fast-growth-lessons-learned-along-way/' },
            { year: 2017, properties: 5200, label: '5,200 properties', source: 'TechCrunch', url: 'https://techcrunch.com/2017/04/20/vacasa-yield-management-2-0-portland-vacation-rentals/' },
            { year: 2018, properties: 10600, label: '10,600 (Oasis acquisition)', source: 'GeekWire', url: 'https://www.geekwire.com/2018/vacasa-jumps-vacation-home-sale-process-new-network-connecting-buyers-sellers-agents/' },
            { year: 2019, properties: 23000, label: '23,000+ (Wyndham acquisition)', source: 'SEC Filing', url: 'https://www.sec.gov/Archives/edgar/data/1361658/000136165819000164/wvrnasalepressrelease.htm', featured: true, callout: 'Wyndham deal adds 9,000 homes' },
            { year: 2021, properties: 35000, label: '35,000 (IPO at $4.5B)', source: 'SEC Filing', url: 'https://www.sec.gov/Archives/edgar/data/1874944/000110465921153954/vcsa-20211227xs1.htm' },
          ]
        },
        {
          name: 'Evolve',
          color: '#4a7c59',
          status: 'active',
          funding: '$235M',
          model: 'Asset-light (10% fee)',
          dataPoints: [
            { year: 2011, properties: 21, label: 'Beta launch: 21 homes', source: 'VRM Intel', url: 'https://vrmintel.com/how-brian-egan-built-evolve-into-a-profitable-short-term-rental-business-whats-next-for-vacation-rentals/' },
            { year: 2013, properties: 1000, label: '1,000+ properties', source: 'PRWeb', url: 'https://www.prweb.com/releases/2013/4/prweb10645319.htm' },
            { year: 2018, properties: 9000, label: '9,000+ properties', source: 'PR Newswire', url: 'https://www.prnewswire.com/news-releases/evolve-vacation-rental-network-announces-80-million-in-new-funding-300701634.html', featured: true, callout: '$80M raise — profitable & growing' },
            { year: 2019, properties: 10000, label: '10,000+ in 500 markets', source: 'Evolve', url: 'https://evolve.com/' },
            { year: 2022, properties: 19000, label: '19,000 properties', source: 'PR Newswire', url: 'https://www.prnewswire.com/news-releases/evolve-raises-100-million-to-continue-building-on-ramp-for-the-next-generation-of-vacation-rental-guests-and-owners-301481180.html' },
            { year: 2025, properties: 35000, label: '35,000+ (profitable)', source: 'Evolve', url: 'https://evolve.com/vacation-rentals' },
          ]
        },
        {
          name: 'Sonder',
          color: '#c0392b',
          status: 'defunct',
          funding: '$680M',
          model: 'Master lease',
          dataPoints: [
            { year: 2014, properties: 500, label: 'Early growth, 11 cities', source: 'McGill Reporter', url: 'https://reporter.mcgill.ca/sonder-mcgills-first-unicorn-has-its-roots-in-dobson/' },
            { year: 2019, properties: 5000, label: '5,000 units ($1.3B unicorn)', source: 'Tracxn', url: 'https://tracxn.com/d/companies/sonder/__Oebkg4Et5GZYls42SLYzbLaRvNIyXQxKepZuL8DRGfE/funding-and-investors' },
            { year: 2021, properties: 16000, label: '16,000+ units, 35 cities', source: 'Sonder', url: 'https://investors.sonder.com/' },
            { year: 2022, properties: 9700, label: '9,700 live units (IPO)', source: 'CoStar', url: 'https://www.costar.com/article/1810425994/sonders-red-flags-a-history-of-net-losses-late-reports' },
            { year: 2023, properties: 18200, label: '18,200 peak units', source: 'Sonder', url: 'https://investors.sonder.com/', featured: true, callout: 'Peak before collapse — $680M raised' },
            { year: 2025, properties: 0, label: 'Chapter 7 bankruptcy', source: 'Bisnow', url: 'https://www.bisnow.com/national/news/hotel/how-growth-over-operations-led-to-sonders-closure-and-chaos-131953' },
          ]
        },
        {
          name: 'AvantStay',
          color: '#8b5a2b',
          status: 'active',
          funding: '$750M',
          model: 'Luxury full-service',
          dataPoints: [
            { year: 2017, properties: 50, label: 'Founded ~50 properties', source: 'Inc.com', url: 'https://www.inc.com/profile/avantstay' },
            { year: 2019, properties: 150, label: '150 properties (Series A)', source: 'PE Hub', url: 'https://www.pehub.com/hospitality-brand-avantstay-rakes-in-20-mln/' },
            { year: 2021, properties: 1000, label: '1,000+ luxury homes', source: 'TechCrunch', url: 'https://techcrunch.com/2021/12/15/avantstay-a-platform-for-kitting-out-and-then-renting-out-high-end-vacation-rental-homes-raises-160m/', featured: true, callout: '$160M Series B at 1,000 homes' },
            { year: 2023, properties: 1500, label: '1,500+ in 100 destinations', source: 'AvantStay', url: 'https://avantstay.com/' },
            { year: 2025, properties: 2300, label: '2,300+ properties', source: 'PRWeb', url: 'https://www.prweb.com/releases/avantstay-announces-opening-of-two-vacation-properties-in-nashville-302282806.html' },
          ]
        },
        {
          name: 'TurnKey',
          color: '#6b5b95',
          status: 'acquired',
          funding: '$120M',
          model: 'Tech-enabled full-service',
          dataPoints: [
            { year: 2013, properties: 50, label: 'Founded in Austin', source: 'Medium', url: 'https://medium.com/authority-magazine/john-banczak-of-turnkey-vacation-rentals-the-future-of-travel-in-the-post-covid-world-5326d38ba7c' },
            { year: 2014, properties: 200, label: '~200 properties (Seed)', source: 'PR Newswire', url: 'https://www.prnewswire.com/news-releases/turnkey-vacation-rentals-secures-3-million-in-seed-financing-from-silverton-partners-and-industry-angels-for-market-expansion-262498411.html' },
            { year: 2018, properties: 3500, label: '3,500 in 52 markets', source: 'Built In Austin', url: 'https://www.builtinaustin.com/articles/turneky-vacation-rentals-raises-31m-series-d', featured: true, callout: 'Industry-first noise monitoring' },
            { year: 2019, properties: 5000, label: '5,000+ ($400M GCV)', source: 'TurnKey', url: 'https://shorttermrentalz.com/news/turnkey-vacation-rentals-funding/' },
            { year: 2021, properties: 6000, label: '6,000 (Acquired $619M)', source: 'Skift', url: 'https://skift.com/2021/11/30/vacasa-paid-619-million-for-turnkey-vacation-rentals-in-mostly-stock/' },
          ]
        },
        {
          name: 'Blueground',
          color: '#3d85c6',
          status: 'active',
          funding: '$350M',
          model: 'Mid-term (30+ days)',
          dataPoints: [
            { year: 2013, properties: 1, label: 'Founded: 1 apartment in Athens', source: 'Blueground', url: 'https://www.theblueground.com/about' },
            { year: 2018, properties: 1500, label: '1,500 apartments (Series A)', source: 'PR Newswire', url: 'https://www.prnewswire.com/news-releases/leading-hospitality-tech-company-blueground-launches-in-united-states-with-plan-to-transform-countrys-property-rental-market-300679548.html' },
            { year: 2019, properties: 3000, label: '3,000 in 10 cities', source: 'Crunchbase News', url: 'https://news.crunchbase.com/startups/flexible-apartment-rental-startup-blueground-raises-50m-series-b/' },
            { year: 2021, properties: 5000, label: '5,000 (92% pandemic occupancy)', source: 'Blueground', url: 'https://www.theblueground.com/blog/hear-our-news/series-c-funding/', featured: true, callout: '$140M Series C — unicorn path' },
            { year: 2023, properties: 12000, label: '12,000 in 29 cities', source: 'Blueground', url: 'https://www.theblueground.com/blog/hear-our-news/blueground-series-d/' },
            { year: 2025, properties: 20000, label: '20,000+ ($1B+ valuation)', source: 'Business Travel News', url: 'https://www.businesstravelnews.com/Lodging/Blueground-Raises-45M-in-Funding-Round' },
          ]
        },
        {
          name: 'Grand Welcome',
          color: '#d4a574',
          status: 'active',
          funding: 'Bootstrapped',
          model: 'Franchise',
          dataPoints: [
            { year: 2009, properties: 10, label: 'Founded in Mammoth Lakes', source: 'Indy Franchise Law', url: 'https://indyfranchiselaw.com/podcast/launching-your-franchise-opportunity-with-brandon-ezra-of-grand-welcome/' },
            { year: 2019, properties: 100, label: 'Launched franchise model', source: 'Grand Welcome', url: 'https://www.grandwelcomefranchise.com/' },
            { year: 2022, properties: 750, label: '750+ properties', source: 'PR Newswire', url: 'https://www.prnewswire.com/news-releases/grand-welcome-announces-it-has-surpassed-750-short-term-vacation-rental-properties-in-the-us-301605895.html', featured: true, callout: '750 properties in <3 years franchising' },
            { year: 2025, properties: 1500, label: '1,500+ in 20 states', source: 'The Enterprise World', url: 'https://theenterpriseworld.com/grand-welcome-future-of-travel/' },
          ]
        },
      ];

      // Chart dimensions
      const width = 1000;
      const height = 550;
      const padding = { top: 60, right: 40, bottom: 60, left: 70 };
      const chartWidth = width - padding.left - padding.right;
      const chartHeight = height - padding.top - padding.bottom;

      // Scale functions
      const minYear = 2008;
      const maxYear = 2026;
      const maxProperties = 50000;

      const xScale = (year) => padding.left + ((year - minYear) / (maxYear - minYear)) * chartWidth;
      const yScale = (properties) => padding.top + chartHeight - (properties / maxProperties) * chartHeight;

      // Generate year labels
      const years = [2009, 2011, 2013, 2015, 2017, 2019, 2021, 2023, 2025];
      const propertyLabels = [0, 10000, 20000, 30000, 40000, 50000];

      // Status colors and labels
      const statusConfig = {
        active: { label: 'Active', color: '#22c55e' },
        acquired: { label: 'Acquired', color: '#f59e0b' },
        defunct: { label: 'Defunct', color: '#ef4444' }
      };

      const styles = {
        container: {
          fontFamily: "'Inter', -apple-system, BlinkMacSystemFont, sans-serif",
          backgroundColor: '#faf9f7',
          padding: '32px 48px',
          height: '100vh',
          maxWidth: '1400px',
          margin: '0 auto',
          display: 'flex',
          flexDirection: 'column'
        },
        header: {
          marginBottom: '16px',
          position: 'relative',
          minHeight: '100px',
          display: 'flex',
          flexDirection: 'column',
          justifyContent: 'center',
          flexShrink: 0
        },
        headerText: {
          marginLeft: '100px',
          zIndex: 2
        },
        label: {
          fontSize: '11px',
          letterSpacing: '2px',
          color: '#999',
          marginBottom: '8px',
          fontWeight: '500'
        },
        titleMain: {
          fontFamily: "'Playfair Display', Georgia, serif",
          fontSize: '52px',
          fontWeight: '400',
          fontStyle: 'italic',
          margin: '0 0 8px 0',
          color: '#1a1a1a',
          lineHeight: '1.1'
        },
        subtitle: {
          fontSize: '15px',
          color: '#666',
          margin: 0,
          fontWeight: '400'
        },
        mainContent: {
          display: 'flex',
          gap: '24px',
          flex: 1,
          minHeight: 0, // Important for nested flex scrolling
        },
        chartSection: {
          flex: '2',
          backgroundColor: '#fff',
          borderRadius: '2px',
          padding: '24px',
          boxShadow: '0 1px 3px rgba(0,0,0,0.04)',
          border: '1px solid #eee',
          display: 'flex',
          flexDirection: 'column',
          position: 'relative',
          overflow: 'visible'
        },
        sourcesSection: {
          flex: '1',
          backgroundColor: '#fff',
          borderRadius: '2px',
          boxShadow: '0 1px 3px rgba(0,0,0,0.04)',
          border: '1px solid #eee',
          display: 'flex',
          flexDirection: 'column',
          overflow: 'hidden'
        },
        sourcesHeader: {
          padding: '16px 20px',
          borderBottom: '1px solid #eee',
          backgroundColor: '#fff',
          zIndex: 10
        },
        sourcesTitle: {
          fontSize: '11px',
          letterSpacing: '2px',
          color: '#999',
          fontWeight: '600',
          margin: 0
        },
        sourcesList: {
          overflowY: 'auto',
          padding: '16px 20px',
          flex: 1
        },
        companyGroup: {
          marginBottom: '24px'
        },
        companyHeader: {
          display: 'flex',
          alignItems: 'center',
          gap: '8px',
          marginBottom: '12px',
          position: 'sticky',
          top: 0,
          backgroundColor: '#fff',
          padding: '4px 0',
          zIndex: 5
        },
        companyDot: {
          width: '8px',
          height: '8px',
          borderRadius: '50%'
        },
        companyName: {
          fontSize: '13px',
          fontWeight: '600',
          color: '#1a1a1a'
        },
        sourceCard: {
          padding: '12px',
          border: '1px solid #eee',
          borderRadius: '4px',
          marginBottom: '8px',
          transition: 'all 0.3s ease',
          backgroundColor: '#fafafa'
        },
        sourceYear: {
          fontSize: '10px',
          fontWeight: '600',
          color: '#999',
          marginBottom: '4px'
        },
        sourceLabel: {
          fontSize: '13px',
          color: '#333',
          marginBottom: '6px',
          lineHeight: '1.4'
        },
        sourceLink: {
          fontSize: '10px',
          color: '#3d85c6',
          textDecoration: 'none',
          display: 'block'
        },
        legend: {
          display: 'flex',
          gap: '16px',
          marginTop: 'auto',
          paddingTop: '16px',
          flexWrap: 'wrap',
          justifyContent: 'center'
        },
        legendItem: {
          display: 'flex',
          alignItems: 'center',
          gap: '6px',
          cursor: 'pointer',
          padding: '4px 8px',
          borderRadius: '4px',
          fontSize: '12px'
        },
        footer: {
          marginTop: '16px',
          fontSize: '11px',
          color: '#999',
          lineHeight: '1.5',
          flexShrink: 0
        }
      };

      const handlePointClick = (companyName, point) => {
        setActiveCompany(companyName);
        const sourceId = `source-${companyName.replace(/\s+/g, '-')}-${point.year}`;
        const element = document.getElementById(sourceId);
        
        if (element && sourcesContainerRef.current) {
          element.scrollIntoView({ behavior: 'smooth', block: 'center' });
          
          // Flash effect
          element.style.borderColor = companies.find(c => c.name === companyName).color;
          element.style.backgroundColor = '#fff';
          element.style.boxShadow = '0 0 0 2px ' + companies.find(c => c.name === companyName).color + '20';
          
          setTimeout(() => {
            element.style.borderColor = '#eee';
            element.style.backgroundColor = '#fafafa';
            element.style.boxShadow = 'none';
          }, 2000);
        }
      };

      return (
        <div style={styles.container}>
          {/* Header */}
          <div style={styles.header}>
            <RapidEyeLogo />
            <div style={styles.headerText}>
              <div style={styles.label}>RAPIDEYE</div>
              <h1 style={styles.titleMain}>The Scaling Timeline</h1>
              <p style={styles.subtitle}>STR property management</p>
            </div>
          </div>

          {/* Main Content Split */}
          <div style={styles.mainContent}>
            
            {/* Left Column: Chart */}
            <div style={styles.chartSection}>
              <div style={{ flex: 1, display: 'flex', alignItems: 'center' }}>
                <svg width="100%" height="100%" viewBox={`0 0 ${width} ${height}`} preserveAspectRatio="xMidYMid meet" style={{ overflow: 'visible' }}>
                  {/* Grid */}
                  {propertyLabels.map((val) => (
                    <g key={val}>
                      <line x1={padding.left} y1={yScale(val)} x2={padding.left + chartWidth} y2={yScale(val)} stroke="#f0f0f0" strokeWidth="1" />
                      <text x={padding.left - 14} y={yScale(val)} textAnchor="end" alignmentBaseline="middle" fontSize="11" fill="#999" fontFamily="Inter">{val === 0 ? '0' : `${Math.round(val / 1000)}k`}</text>
                    </g>
                  ))}
                  {years.map((year) => (
                    <g key={year}>
                      <line x1={xScale(year)} y1={padding.top} x2={xScale(year)} y2={padding.top + chartHeight} stroke="#f5f5f5" strokeWidth="1" />
                      <text x={xScale(year)} y={height - padding.bottom + 24} textAnchor="middle" fontSize="11" fill="#999" fontFamily="Inter">{year}</text>
                    </g>
                  ))}

                  {/* Companies */}
                  {companies.map((company) => {
                    const sortedPoints = [...company.dataPoints].sort((a, b) => a.year - b.year);
                    const points = sortedPoints.map(d => `${xScale(d.year)},${yScale(d.properties)}`).join(' ');
                    const isActive = activeCompany === company.name || activeCompany === null;
                    const featuredPoint = sortedPoints.find(p => p.featured);
                    const textOffset = calloutPositions[company.name] || { x: 50, y: -30 };
                    const lineEndOffset = lineEndpoints[company.name] || { x: 20, y: -20 };

                    return (
                      <g key={company.name} opacity={isActive ? 1 : 0.15} style={{ transition: 'opacity 0.3s' }}>
                        <polyline
                          points={points}
                          fill="none"
                          stroke={company.color}
                          strokeWidth="2.5"
                          strokeLinecap="round"
                          strokeLinejoin="round"
                          strokeDasharray={company.status === 'defunct' ? '8,4' : 'none'}
                        />
                        {sortedPoints.map((point, i) => (
                          <g key={i}>
                            <circle 
                              cx={xScale(point.year)} cy={yScale(point.properties)} r="12" fill="transparent" 
                              onMouseEnter={() => setActiveCompany(company.name)} 
                              onMouseLeave={() => setActiveCompany(null)} 
                              onClick={() => handlePointClick(company.name, point)} 
                              style={{ cursor: 'pointer' }} 
                            />
                            {/* Special X marker for bankruptcy endpoints */}
                            {company.status === 'defunct' && point.properties === 0 ? (
                              <g pointerEvents="none">
                                <circle cx={xScale(point.year)} cy={yScale(point.properties)} r="8" fill="#ef4444" stroke="#fff" strokeWidth="2" />
                                <text x={xScale(point.year)} y={yScale(point.properties) + 1} textAnchor="middle" dominantBaseline="middle" fontSize="10" fill="#fff" fontWeight="bold">✕</text>
                              </g>
                            ) : (
                              <circle cx={xScale(point.year)} cy={yScale(point.properties)} r={point.featured ? 7 : 5} fill={company.color} stroke="#fff" strokeWidth="2" pointerEvents="none" />
                            )}
                          </g>
                        ))}
                        {featuredPoint && (
                          <g opacity={isActive ? 1 : 0.25}>
                            <line x1={xScale(featuredPoint.year)} y1={yScale(featuredPoint.properties)} x2={xScale(featuredPoint.year) + lineEndOffset.x} y2={yScale(featuredPoint.properties) + lineEndOffset.y} stroke={company.color} strokeWidth="1" opacity="0.35" />
                            <text
                              x={xScale(featuredPoint.year) + textOffset.x} y={yScale(featuredPoint.properties) + textOffset.y}
                              textAnchor="start" fontSize="9" fill="#666" fontFamily="Inter" fontWeight="400"
                              onClick={() => handlePointClick(company.name, featuredPoint)}
                              style={{ cursor: 'pointer' }}
                            >
                              {featuredPoint.callout}
                            </text>
                          </g>
                        )}
                      </g>
                    );
                  })}
                  <text x={20} y={padding.top + chartHeight / 2} textAnchor="middle" fontSize="11" fill="#999" fontFamily="Inter" transform={`rotate(-90, 20, ${padding.top + chartHeight / 2})`}>Properties Managed</text>
                </svg>
              </div>
              
              {/* Legend */}
              <div style={styles.legend}>
                {companies.map((company) => (
                  <div
                    key={company.name}
                    style={{
                      ...styles.legendItem,
                      opacity: activeCompany === company.name || activeCompany === null ? 1 : 0.3,
                      backgroundColor: activeCompany === company.name ? '#f5f5f5' : 'transparent'
                    }}
                    onMouseEnter={() => setActiveCompany(company.name)}
                    onMouseLeave={() => setActiveCompany(null)}
                  >
                    <div style={{
                      width: '8px',
                      height: '8px',
                      borderRadius: '50%',
                      backgroundColor: company.color,
                      border: company.status === 'defunct' ? '2px solid #ef4444' : 'none',
                      boxSizing: 'border-box'
                    }} />
                    <span style={{
                      color: '#333',
                      fontWeight: '500',
                      textDecoration: company.status === 'defunct' ? 'line-through' : 'none'
                    }}>{company.name}</span>
                    {company.status !== 'active' && (
                      <span style={{
                        fontSize: '8px',
                        padding: '1px 4px',
                        borderRadius: '3px',
                        backgroundColor: statusConfig[company.status].color,
                        color: '#fff',
                        fontWeight: '600',
                        marginLeft: '2px'
                      }}>{statusConfig[company.status].label.toUpperCase()}</span>
                    )}
                  </div>
                ))}
              </div>
            </div>

            {/* Right Column: Scrollable Sources */}
            <div style={styles.sourcesSection}>
              <div style={styles.sourcesHeader}>
                <h3 style={styles.sourcesTitle}>DATA SOURCES</h3>
              </div>
              <div style={styles.sourcesList} className="source-scroll" ref={sourcesContainerRef}>
                {companies.map((company) => (
                  <div key={company.name} style={{
                    ...styles.companyGroup,
                    opacity: activeCompany === company.name || activeCompany === null ? 1 : 0.3,
                    transition: 'opacity 0.3s'
                  }}>
                    <div style={styles.companyHeader}>
                      <div style={{
                        ...styles.companyDot,
                        backgroundColor: company.color,
                        border: company.status === 'defunct' ? '2px solid #ef4444' : 'none',
                        boxSizing: 'border-box'
                      }} />
                      <span style={{
                        ...styles.companyName,
                        textDecoration: company.status === 'defunct' ? 'line-through' : 'none'
                      }}>{company.name}</span>
                      {company.status !== 'active' && (
                        <span style={{
                          fontSize: '8px',
                          padding: '1px 4px',
                          borderRadius: '3px',
                          backgroundColor: statusConfig[company.status].color,
                          color: '#fff',
                          fontWeight: '600'
                        }}>{statusConfig[company.status].label.toUpperCase()}</span>
                      )}
                      <span style={{ fontSize: '9px', color: '#999', marginLeft: 'auto' }}>{company.funding}</span>
                    </div>
                    {company.dataPoints.map((point, i) => (
                      <div
                        key={i}
                        id={`source-${company.name.replace(/\s+/g, '-')}-${point.year}`}
                        style={{
                          ...styles.sourceCard,
                          borderLeft: point.featured ? `3px solid ${company.color}` : '1px solid #eee'
                        }}
                      >
                        <div style={styles.sourceYear}>{point.year}</div>
                        <div style={styles.sourceLabel}>{point.label}</div>
                        <a href={point.url} target="_blank" rel="noopener noreferrer" style={styles.sourceLink}>
                          Source: {point.source} ↗
                        </a>
                      </div>
                    ))}
                  </div>
                ))}
              </div>
            </div>
          </div>

          {/* Footer */}
          <div style={styles.footer}>
            <em>Note: Master lease models (fixed rent obligations) proved fatal — every major company using them failed. Asset-light management agreements survived. Only publicly documented milestones shown.</em>
          </div>
        </div>
      );
    };

    ReactDOM.render(<PMGrowthTimeline />, document.getElementById('root'));
  </script>
</body>
</html>